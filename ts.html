<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau de Recherche de Stage - Pierre DUMONT ROTY</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 30px;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .filters {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            align-items: center;
        }

        .filters select, .filters input {
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 5px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .filters select:focus, .filters input:focus {
            outline: none;
            border-color: #667eea;
        }

        .add-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
        }

        .add-form.active {
            display: block;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        .form-group input, .form-group select, .form-group textarea {
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 5px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-group textarea {
            resize: vertical;
            height: 80px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: transform 0.2s;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-danger {
            background: #dc3545;
        }

        .btn-success {
            background: #28a745;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: bold;
            position: sticky;
            top: 0;
        }

        tr:hover {
            background-color: #f8f9fa;
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .status-candidature {
            background: #ffeaa7;
            color: #2d3436;
        }

        .status-entretien {
            background: #74b9ff;
            color: white;
        }

        .status-accepte {
            background: #00b894;
            color: white;
        }

        .status-refuse {
            background: #e17055;
            color: white;
        }

        .status-attente {
            background: #a29bfe;
            color: white;
        }

        .actions {
            display: flex;
            gap: 5px;
        }

        .btn-small {
            padding: 5px 10px;
            font-size: 12px;
        }

        .export-section {
            margin-top: 30px;
            text-align: center;
        }

        .lien-info {
            border-radius: 5px;
            padding: 8px;
            margin-top: 5px;
            font-size: 12px;
            font-weight: bold;
        }

        .lien-info.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .lien-info.warning {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .lien-info.info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .auto-fill-section {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #2196f3;
        }

        .auto-fill-section h4 {
            margin: 0 0 10px 0;
            color: #1976d2;
            font-size: 14px;
        }

        .auto-fill-section p {
            margin: 0;
            font-size: 12px;
            color: #424242;
            line-height: 1.4;
        }

        .supported-sites {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 8px;
        }

        .site-badge {
            background: #ffffff;
            border: 1px solid #2196f3;
            color: #1976d2;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            table {
                font-size: 12px;
            }
            
            th, td {
                padding: 8px;
            }

            .supported-sites {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìã Suivi de Recherche de Stage</h1>
        
        <div class="stats">
            <div class="stat-card">
                <div class="stat-number" id="totalCandidatures">0</div>
                <div class="stat-label">Candidatures</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalEntretiens">0</div>
                <div class="stat-label">Entretiens</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalAcceptes">0</div>
                <div class="stat-label">Accept√©s</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="tauxReponse">0%</div>
                <div class="stat-label">Taux de R√©ponse</div>
            </div>
        </div>

        <div class="filters">
            <input type="text" id="searchInput" placeholder="üîç Rechercher par entreprise ou poste...">
            <select id="statusFilter">
                <option value="">Tous les statuts</option>
                <option value="candidature">Candidature envoy√©e</option>
                <option value="entretien">Entretien planifi√©</option>
                <option value="accepte">Accept√©</option>
                <option value="refuse">Refus√©</option>
                <option value="attente">En attente</option>
            </select>
            <select id="sortBy">
                <option value="date">Trier par date</option>
                <option value="entreprise">Trier par entreprise</option>
                <option value="statut">Trier par statut</option>
            </select>
            <button class="btn" onclick="toggleAddForm()">‚ûï Ajouter un Stage</button>
        </div>

        <div class="add-form" id="addForm">
            <h3>Ajouter une nouvelle candidature</h3>
            
            <div class="auto-fill-section">
                <h4>üöÄ Remplissage automatique disponible</h4>
                <p>Collez le lien de l'annonce et cliquez sur "Pr√©-remplir" pour extraire automatiquement les informations !</p>
                <div class="supported-sites">
                    <span class="site-badge">Welcome to the Jungle</span>
                    <span class="site-badge">Indeed</span>
                    <span class="site-badge">LinkedIn</span>
                    <span class="site-badge">Autres sites</span>
                </div>
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label>Entreprise *</label>
                    <input type="text" id="entreprise" required>
                </div>
                <div class="form-group">
                    <label>Poste *</label>
                    <input type="text" id="poste" required>
                </div>
                <div class="form-group">
                    <label>Lieu</label>
                    <input type="text" id="lieu">
                </div>
                <div class="form-group">
                    <label>Date de candidature</label>
                    <input type="date" id="dateCandidature">
                </div>
                <div class="form-group">
                    <label>Statut</label>
                    <select id="statut">
                        <option value="candidature">Candidature envoy√©e</option>
                        <option value="entretien">Entretien planifi√©</option>
                        <option value="accepte">Accept√©</option>
                        <option value="refuse">Refus√©</option>
                        <option value="attente">En attente</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Contact</label>
                    <input type="text" id="contact" placeholder="Nom du recruteur">
                </div>
                <div class="form-group">
                    <label>Email/T√©l√©phone</label>
                    <input type="text" id="contactInfo" placeholder="email@example.com">
                </div>
                <div class="form-group">
                    <label>Salaire propos√©</label>
                    <input type="text" id="salaire" placeholder="Ex: 600‚Ç¨/mois">
                </div>
                <div class="form-group">
                    <label>Lien de l'annonce</label>
                    <input type="url" id="lienAnnonce" placeholder="https://www.welcometothejungle.com/fr/companies/...">
                </div>
            </div>
            <div class="form-group">
                <label>Notes</label>
                <textarea id="notes" placeholder="Informations compl√©mentaires, retours d'entretien..."></textarea>
            </div>
            <div class="form-group">
                <button type="button" class="btn btn-secondary" onclick="remplirDepuisLien()">üîó Pr√©-remplir depuis l'annonce</button>
            </div>
            <div>
                <button class="btn" onclick="ajouterStage()">üíæ Enregistrer</button>
                <button class="btn btn-secondary" onclick="toggleAddForm()">‚ùå Annuler</button>
            </div>
        </div>

        <table id="stageTable">
            <thead>
                <tr>
                    <th>Entreprise</th>
                    <th>Poste</th>
                    <th>Lieu</th>
                    <th>Date</th>
                    <th>Statut</th>
                    <th>Contact</th>
                    <th>Salaire</th>
                    <th>Annonce</th>
                    <th>Notes</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="stageTableBody">
                <!-- Les donn√©es seront ajout√©es dynamiquement -->
            </tbody>
        </table>

        <div class="export-section">
            <button class="btn btn-success" onclick="exporterCSV()">üìä Exporter en CSV</button>
            <button class="btn btn-secondary" onclick="importerDonnees()">üì• Importer des donn√©es</button>
            <input type="file" id="fileInput" accept=".json" style="display: none;" onchange="chargerFichier()">
        </div>
    </div>

    <script>
        let stages = [];
        let editingIndex = -1;

        // Charger les donn√©es depuis localStorage au d√©marrage
        window.onload = function() {
            chargerDonnees();
            document.getElementById('dateCandidature').value = new Date().toISOString().split('T')[0];
        };

        function toggleAddForm() {
            const form = document.getElementById('addForm');
            if (form.classList.contains('active')) {
                form.classList.remove('active');
                resetForm();
            } else {
                form.classList.add('active');
            }
        }

        function ajouterStage() {
            const stage = {
                entreprise: document.getElementById('entreprise').value,
                poste: document.getElementById('poste').value,
                lieu: document.getElementById('lieu').value,
                date: document.getElementById('dateCandidature').value,
                statut: document.getElementById('statut').value,
                contact: document.getElementById('contact').value,
                contactInfo: document.getElementById('contactInfo').value,
                salaire: document.getElementById('salaire').value,
                lienAnnonce: document.getElementById('lienAnnonce').value,
                notes: document.getElementById('notes').value,
                id: editingIndex >= 0 ? stages[editingIndex].id : Date.now()
            };

            if (!stage.entreprise || !stage.poste) {
                alert('Veuillez remplir au moins l\'entreprise et le poste.');
                return;
            }

            if (editingIndex >= 0) {
                stages[editingIndex] = stage;
                editingIndex = -1;
            } else {
                stages.push(stage);
            }

            sauvegarderDonnees();
            afficherStages();
            resetForm();
            toggleAddForm();
            mettreAJourStatistiques();
        }

        function resetForm() {
            document.getElementById('entreprise').value = '';
            document.getElementById('poste').value = '';
            document.getElementById('lieu').value = '';
            document.getElementById('dateCandidature').value = new Date().toISOString().split('T')[0];
            document.getElementById('statut').value = 'candidature';
            document.getElementById('contact').value = '';
            document.getElementById('contactInfo').value = '';
            document.getElementById('salaire').value = '';
            document.getElementById('lienAnnonce').value = '';
            document.getElementById('notes').value = '';
            editingIndex = -1;
        }

        function modifierStage(index) {
            const stage = stages[index];
            document.getElementById('entreprise').value = stage.entreprise;
            document.getElementById('poste').value = stage.poste;
            document.getElementById('lieu').value = stage.lieu;
            document.getElementById('dateCandidature').value = stage.date;
            document.getElementById('statut').value = stage.statut;
            document.getElementById('contact').value = stage.contact;
            document.getElementById('contactInfo').value = stage.contactInfo;
            document.getElementById('salaire').value = stage.salaire;
            document.getElementById('lienAnnonce').value = stage.lienAnnonce || '';
            document.getElementById('notes').value = stage.notes;
            
            editingIndex = index;
            document.getElementById('addForm').classList.add('active');
        }

        function supprimerStage(index) {
            if (confirm('√ätes-vous s√ªr de vouloir supprimer cette candidature ?')) {
                stages.splice(index, 1);
                sauvegarderDonnees();
                afficherStages();
                mettreAJourStatistiques();
            }
        }

        function afficherStages() {
            const tbody = document.getElementById('stageTableBody');
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value;
            const sortBy = document.getElementById('sortBy').value;

            let stagesFiltres = stages.filter(stage => {
                const matchesSearch = stage.entreprise.toLowerCase().includes(searchTerm) || 
                                    stage.poste.toLowerCase().includes(searchTerm);
                const matchesStatus = !statusFilter || stage.statut === statusFilter;
                return matchesSearch && matchesStatus;
            });

            // Tri
            stagesFiltres.sort((a, b) => {
                if (sortBy === 'date') return new Date(b.date) - new Date(a.date);
                if (sortBy === 'entreprise') return a.entreprise.localeCompare(b.entreprise);
                if (sortBy === 'statut') return a.statut.localeCompare(b.statut);
                return 0;
            });

            tbody.innerHTML = '';
            stagesFiltres.forEach((stage, index) => {
                const originalIndex = stages.indexOf(stage);
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${stage.entreprise}</strong></td>
                    <td>${stage.poste}</td>
                    <td>${stage.lieu}</td>
                    <td>${stage.date ? new Date(stage.date).toLocaleDateString('fr-FR') : ''}</td>
                    <td><span class="status-badge status-${stage.statut}">${getStatusText(stage.statut)}</span></td>
                    <td>${stage.contact}<br><small>${stage.contactInfo}</small></td>
                    <td>${stage.salaire}</td>
                    <td>${stage.lienAnnonce ? `<a href="${stage.lienAnnonce}" target="_blank" title="Voir l'annonce">üîó</a>` : ''}</td>
                    <td>${stage.notes.length > 50 ? stage.notes.substring(0, 50) + '...' : stage.notes}</td>
                    <td class="actions">
                        <button class="btn btn-small" onclick="modifierStage(${originalIndex})" title="Modifier">‚úèÔ∏è</button>
                        <button class="btn btn-danger btn-small" onclick="supprimerStage(${originalIndex})" title="Supprimer">üóëÔ∏è</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function getStatusText(status) {
            const statusTexts = {
                'candidature': 'Candidature',
                'entretien': 'Entretien',
                'accepte': 'Accept√©',
                'refuse': 'Refus√©',
                'attente': 'En attente'
            };
            return statusTexts[status] || status;
        }

        function mettreAJourStatistiques() {
            const total = stages.length;
            const entretiens = stages.filter(s => s.statut === 'entretien' || s.statut === 'accepte').length;
            const acceptes = stages.filter(s => s.statut === 'accepte').length;
            const reponses = stages.filter(s => s.statut !== 'candidature' && s.statut !== 'attente').length;
            const tauxReponse = total > 0 ? Math.round((reponses / total) * 100) : 0;

            document.getElementById('totalCandidatures').textContent = total;
            document.getElementById('totalEntretiens').textContent = entretiens;
            document.getElementById('totalAcceptes').textContent = acceptes;
            document.getElementById('tauxReponse').textContent = tauxReponse + '%';
        }

        function sauvegarderDonnees() {
            localStorage.setItem('stagesData', JSON.stringify(stages));
        }

        function chargerDonnees() {
            const data = localStorage.getItem('stagesData');
            if (data) {
                stages = JSON.parse(data);
                afficherStages();
                mettreAJourStatistiques();
            }
        }

        function exporterCSV() {
            const headers = ['Entreprise', 'Poste', 'Lieu', 'Date', 'Statut', 'Contact', 'Contact Info', 'Salaire', 'Lien Annonce', 'Notes'];
            const csvContent = [
                headers.join(','),
                ...stages.map(stage => [
                    stage.entreprise,
                    stage.poste,
                    stage.lieu,
                    stage.date,
                    getStatusText(stage.statut),
                    stage.contact,
                    stage.contactInfo,
                    stage.salaire,
                    stage.lienAnnonce || '',
                    stage.notes.replace(/,/g, ';')
                ].join(','))
            ].join('\n');

            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `recherche_stages_${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            window.URL.revokeObjectURL(url);
        }

        function importerDonnees() {
            document.getElementById('fileInput').click();
        }

        function chargerFichier() {
            const file = document.getElementById('fileInput').files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const importedData = JSON.parse(e.target.result);
                        if (Array.isArray(importedData)) {
                            stages = importedData;
                            sauvegarderDonnees();
                            afficherStages();
                            mettreAJourStatistiques();
                            alert('Donn√©es import√©es avec succ√®s !');
                        }
                    } catch (error) {
                        alert('Erreur lors de l\'importation du fichier.');
                    }
                };
                reader.readAsText(file);
            }
        }

        // Event listeners pour les filtres
        document.getElementById('searchInput').addEventListener('input', afficherStages);
        document.getElementById('statusFilter').addEventListener('change', afficherStages);
        document.getElementById('sortBy').addEventListener('change', afficherStages);

        // Fonction pour pr√©-remplir depuis le lien de l'annonce
        function remplirDepuisLien() {
            const lien = document.getElementById('lienAnnonce').value;
            if (!lien) {
                alert('Veuillez d\'abord saisir le lien de l\'annonce.');
                return;
            }

            // Afficher un indicateur de chargement
            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = '‚è≥ Extraction...';
            btn.disabled = true;

            try {
                // Extraction des informations depuis l'URL
                if (lien.includes('welcometothejungle.com')) {
                    extraireWelcomeToJungle(lien, btn, originalText);
                } else if (lien.includes('indeed.com') || lien.includes('indeed.fr')) {
                    extraireIndeed(lien, btn, originalText);
                } else if (lien.includes('linkedin.com')) {
                    extraireLinkedIn(lien, btn, originalText);
                } else {
                    // Pour les autres sites, essayer une extraction g√©n√©rique
                    extraireGenerique(lien, btn, originalText);
                }
            } catch (error) {
                console.error('Erreur lors de l\'extraction:', error);
                resetButton(btn, originalText);
                alert('Impossible d\'extraire les informations automatiquement. Veuillez remplir manuellement.');
            }
        }

        function extraireWelcomeToJungle(lien, btn, originalText) {
            // Parsing de l'URL Welcome to the Jungle pour extraire les informations
            try {
                const url = new URL(lien);
                const pathParts = url.pathname.split('/');
                
                // Structure typique: /fr/companies/company-name/jobs/job-slug
                if (pathParts.includes('companies') && pathParts.includes('jobs')) {
                    const companyIndex = pathParts.indexOf('companies');
                    const jobIndex = pathParts.indexOf('jobs');
                    
                    if (companyIndex >= 0 && jobIndex >= 0 && jobIndex > companyIndex) {
                        const companySlug = pathParts[companyIndex + 1];
                        const jobSlug = pathParts[jobIndex + 1];
                        
                        // Nettoyer et formater le nom de l'entreprise
                        const entreprise = companySlug
                            .split('-')
                            .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                            .join(' ');
                        
                        // Nettoyer et formater le poste
                        const poste = jobSlug
                            .split('-')
                            .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                            .join(' ');

                        document.getElementById('entreprise').value = entreprise;
                        document.getElementById('poste').value = poste;
                        
                        // Essayer de r√©cup√©rer plus d'informations si possible
                        setTimeout(() => {
                            resetButton(btn, originalText);
                            alert('‚úÖ Informations extraites avec succ√®s ! V√©rifiez et compl√©tez les champs si n√©cessaire.');
                        }, 500);
                        return;
                    }
                }
            } catch (error) {
                console.error('Erreur Welcome to Jungle:', error);
            }
            
            resetButton(btn, originalText);
            remplirDepuisURL(lien);
        }

        function extraireIndeed(lien, btn, originalText) {
            // Pour Indeed, essayer d'extraire des param√®tres de l'URL
            try {
                const url = new URL(lien);
                const params = new URLSearchParams(url.search);
                
                const jobTitle = params.get('q') || params.get('title');
                const location = params.get('l') || params.get('location');
                
                if (jobTitle) {
                    document.getElementById('poste').value = jobTitle;
                }
                if (location) {
                    document.getElementById('lieu').value = location;
                }
                
                setTimeout(() => {
                    resetButton(btn, originalText);
                    alert('‚úÖ Informations partielles extraites ! Compl√©tez le nom de l\'entreprise manuellement.');
                }, 500);
            } catch (error) {
                resetButton(btn, originalText);
                remplirDepuisURL(lien);
            }
        }

        function extraireLinkedIn(lien, btn, originalText) {
            // Pour LinkedIn, extraction basique depuis l'URL
            resetButton(btn, originalText);
            alert('‚ÑπÔ∏è LinkedIn d√©tect√©. Les informations doivent √™tre saisies manuellement pour des raisons de s√©curit√©.');
        }

        function extraireGenerique(lien, btn, originalText) {
            resetButton(btn, originalText);
            remplirDepuisURL(lien);
        }

        function remplirDepuisURL(lien) {
            // Extraction basique depuis l'URL du domaine comme nom d'entreprise potentiel
            try {
                const url = new URL(lien);
                const domain = url.hostname.replace('www.', '');
                const domainParts = domain.split('.');
                
                if (domainParts.length > 1) {
                    const companyName = domainParts[0]
                        .split('-')
                        .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                        .join(' ');
                    
                    if (!document.getElementById('entreprise').value) {
                        document.getElementById('entreprise').value = companyName;
                    }
                }
                
                alert('‚ÑπÔ∏è Extraction automatique limit√©e. Veuillez v√©rifier et compl√©ter les informations.');
            } catch (error) {
                alert('‚ùå Impossible d\'analyser ce lien. Veuillez remplir manuellement.');
            }
        }

        function resetButton(btn, originalText) {
            btn.textContent = originalText;
            btn.disabled = false;
        }

        // Fonction pour d√©tecter automatiquement le type de lien et sugg√©rer des actions
        document.getElementById('lienAnnonce').addEventListener('input', function() {
            const lien = this.value;
            if (lien) {
                const infoDiv = document.getElementById('lienInfo') || createLienInfo();
                
                if (lien.includes('welcometothejungle.com')) {
                    infoDiv.innerHTML = 'üéØ Welcome to the Jungle d√©tect√© - Extraction automatique disponible !';
                    infoDiv.className = 'lien-info success';
                } else if (lien.includes('indeed.')) {
                    infoDiv.innerHTML = 'üîç Indeed d√©tect√© - Extraction partielle disponible.';
                    infoDiv.className = 'lien-info warning';
                } else if (lien.includes('linkedin.com')) {
                    infoDiv.innerHTML = 'üíº LinkedIn d√©tect√© - Remplissage manuel requis.';
                    infoDiv.className = 'lien-info info';
                } else if (lien.startsWith('http')) {
                    infoDiv.innerHTML = 'üîó Lien d√©tect√© - Extraction basique possible.';
                    infoDiv.className = 'lien-info info';
                } else {
                    infoDiv.innerHTML = '';
                }
            }
        });

        function createLienInfo() {
            const infoDiv = document.createElement('div');
            infoDiv.id = 'lienInfo';
            infoDiv.style.marginTop = '5px';
            infoDiv.style.fontSize = '12px';
            infoDiv.style.padding = '5px';
            infoDiv.style.borderRadius = '3px';
            
            const lienInput = document.getElementById('lienAnnonce');
            lienInput.parentNode.appendChild(infoDiv);
            
            return infoDiv;
        }
    </script>
</body>
</html>